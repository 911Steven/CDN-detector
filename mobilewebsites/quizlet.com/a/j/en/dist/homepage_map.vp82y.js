QWait("Quizlet.Common.d3",function(){webpackJsonp([38],{0:function(f,d,b){(function(d){var e=b(2)["default"],c=b(480),g=e(c),c=b(14),f=e(c);d.Quizlet.HomepageMap={options:{plotInterval:250,highlightInterval:2E3,modeRemovalTime:15E3},nowShowing:null,highlightLoop:0,initialize:function(){var a=1050/(2*Math.PI);this.projection=g["default"].geo.mercator().scale(a).translate([630,260]);this.refreshData();var a=$("body").hasClass("mobile")?"touchstart":"mouseenter",h=$("body").hasClass("mobile")?"touchend":
"mouseleave",b=this;$("#map-sessions").on(a,".blip",function(a){b.unhighlight();b.stopHighlighting();$(a.currentTarget).addClass("retain");$(a.currentTarget).parents(".session").addClass("touching")}).on(h,".blip",function(a){b.startHighlighting(600);$(a.currentTarget).removeClass("retain");$(a.currentTarget).parents(".session").removeClass("touching")})},refreshData:function(){var a=this;$.ajax({url:"https://quizlet.com/homepage/map-activity",type:"GET",data:{last_id:this.lastId},success:function(b){a.items=
b.items;a.totalItems=a.items.length;a.plotLoop=setInterval(a.plotNextItem.bind(a),a.options.plotInterval);a.startHighlighting(4*a.options.plotInterval)}})},startHighlighting:function(a){var b=this;this.highlightLoop=setTimeout(function(){b.highlightRandomSession();b.highlightLoop=setInterval(b.highlightRandomSession.bind(b),b.options.highlightInterval)},a)},stopHighlighting:function(){clearInterval(this.highlightLoop);clearTimeout(this.highlightLoop)},highlightRandomSession:function(){if(!this.paused){this.unhighlight();
var a=$("#map-sessions .session").not(".showing").not(".remove"),b=Math.floor(a.length*Math.random());this.nowShowing=$(a[b]).addClass("showing")}},unhighlight:function(){null!==this.nowShowing&&this.nowShowing.removeClass("showing")},plotNextItem:function(){if(!this.paused){var a=this.items.shift();(a.longitude||a.latitude)&&a.location?(this.plotActivity(a),this.items.push(a)):this.plotNextItem()}},plotActivity:function(a){function b(a){a.hasClass("retain")||a.parent(".session").hasClass("showing")?
setTimeout(function(){b(a)},4E3):(a.addClass("remove"),setTimeout(function(){a.parents(".session").remove()},1700))}var c=this.projection([a.longitude,a.latitude]);if(c){var d=f["default"]({session:!0,flipped:c[0]}),e=$($.trim('\n\t\t\t\t<div class="'+d+'">\n\t\t\t\t\t<div class="new blip"></div>\n\t\t\t\t\t<div class="label">\n\t\t\t\t\t\t<div class="setname">'+htmlescape(a.set)+'</div>\n\t\t\t\t\t\t<div class="location">'+htmlescape(a.location)+'</div>\n\t\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t')).css({left:Math.round(c[0]+
2*(Math.random()-.5)-2),top:Math.round(c[1]+2*(Math.random()-.5)-2)});e.appendTo("#map-sessions");e.data("item",a);setTimeout(function(){e.children(".blip").removeClass("new")},10);setTimeout(function(){var a=e.children(".blip");b(a)},this.options.modeRemovalTime)}},pause:function(){this.paused=!0},unpause:function(){this.paused=!1}};QWait("dom","jquery",function(){QLoad("Quizlet.HomepageMap")})}).call(d,function(){return this}())},2:function(f,d){d["default"]=function(b){return b&&b.__esModule?b:
{"default":b}};d.__esModule=!0},14:function(f,d){f.exports=function(){for(var b=arguments,d=[],e=0;e<b.length;e++){var c=b[e];if(null!=c)if("string"===typeof c)d.push(c);else if("object"===typeof c)for(var f in c)c.hasOwnProperty(f)&&c[f]&&d.push(f)}return d.join(" ")}}})});
